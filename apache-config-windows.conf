# Apache Virtual Host Configuration for Windows
# Add this to your httpd-vhosts.conf or httpd.conf file
# 
# Location: C:\Apache24\conf\extra\httpd-vhosts.conf (or similar, depending on your Apache installation)

<VirtualHost *:80>
    # Change this to your domain name, server IP, or localhost
    ServerName localhost
    ServerAlias 127.0.0.1
    
    # Update this path to match your project location
    # Example: C:/Users/NURMIZAN QISTINA/Desktop/fyp/iot-secure-water-monitor
    Define PROJECT_DIR "C:/Users/NURMIZAN QISTINA/Desktop/fyp/iot-secure-water-monitor"
    
    # WSGI Configuration
    # Note: Update python-home to point to your venv Scripts directory
    WSGIDaemonProcess iot-water-monitor python-home=${PROJECT_DIR}/venv python-path=${PROJECT_DIR}
    WSGIProcessGroup iot-water-monitor
    WSGIScriptAlias / ${PROJECT_DIR}/app.wsgi
    
    # Directory permissions
    <Directory "${PROJECT_DIR}">
        Require all granted
        Options -Indexes +FollowSymLinks
        AllowOverride None
    </Directory>
    
    # Static files
    Alias /static "${PROJECT_DIR}/static"
    <Directory "${PROJECT_DIR}/static">
        Require all granted
        Options -Indexes
    </Directory>
    
    # Logging (update paths to match your Apache installation)
    ErrorLog "logs/iot-water-monitor-error.log"
    CustomLog "logs/iot-water-monitor-access.log" combined
    
    # Environment variables (set your application-specific variables here)
    SetEnv FLASK_APP app.py
    SetEnv FLASK_ENV production
    # SetEnv MQTT_HOST your_mqtt_host
    # SetEnv MQTT_PORT 1883
    # SetEnv SECRET_KEY your_secret_key_here
    
    # Security headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
</VirtualHost>

# Instructions:
# 1. Copy the Define PROJECT_DIR line and update the path
# 2. Update ServerName if using a domain
# 3. Uncomment and set environment variables as needed
# 4. Update log paths if your Apache logs directory is different
# 5. Restart Apache service after making changes

